# API 文档

## API 文档概述

本 API 文档详述了我们所开发的一套优化仓库调度与成本控制算法模块的接口定义。该模块设计用于支持进行库存管理和订单配送的企业，以精准控制库存分配和成本管理。

这些接口按照以下两类进行划分：

1. 我们向第三方发出请求的接口，包括 `sptp/queryYscb` 和 `sptp/ckylcxByUTC` 两个 API。`sptp/queryYscb` API 用于查询特定商品从指定仓库至下单公司的总调配成本（包括出库时间和运输成本）。`sptp/ckylcxByUTC` API 根据协调世界时（UTC）查询仓库的余量。

2. 第三方向我们发出请求的接口，例如 `getZytpcl` API，该接口根据商品订单生成最优的仓库调配策略。在请求参数中，客户端会提供仓库排序信息，无需在处理每个订单时都单独调用接口。

本 API 的设计初衷是实现不同系统和平台之间的无缝集成，以简化库存管理和订单调配的流程。通过运用这些 API，企业可以优化他们的物流过程，有效降低成本并提升效率。

我们期望本文档提供的详细解释与示例能助您更好地利用这些 API。如您有任何进一步的问题或需进行其他修改，欢迎随时与我们取得联系（sudingli@buaa.edu.cn）。 

## 1. sptp/queryYscb

### 描述

查询从指定仓库运输特定货物到下订单的公司的总调配成本（包含出库时间和运输成本）。

### HTTP 方法

POST

### 请求参数

```json
{
   "spnm": "商品内码", 
   "cknm": "仓库内码",
   "jd": "下订单公司的经度", 
   "wd": "下订单公司的纬度",
   "sl": "商品数量", 
   "lg": "量纲(千克/个)"
}
```

### 返回结果

```json
{
   "code": 200,
   "data": 36.0
}
```

--- 

## 2. sptp/ckylcxByUTC

### 描述

根据UTC时间进行仓库余量查询。

### HTTP 方法

POST

### 请求参数

```json
{
   "spxqxx":[  // 商品需求信息
      {
         "spnm":"商品内码",
         "zwkssj":"最晚开始时间(用订单需求时间减去调配成本)"
      }
   ]
}
```

### 返回结果

```json
{
   "code":200,
   "data":[
      {
         "ckkcsjVOS":[  // 仓库库存时间信息
            {
               "sjjd":"时间节点",
               "ckkcvos":[  // 仓库库存信息
                  {
                     "cknm":"仓库内码",
                     "xyl":50.0//现有量
                  },
                  {
                     "cknm":"仓库内码",
                     "xyl":100.0
                  },
                  {
                     "cknm":"仓库内码",
                     "xyl":200.0
                  }
               ]
            }
         ],
         "spnm":"商品内码"
      }
   ]
}
```

## 3. getZytpcl

#### 描述

根据商品订单生成最优仓库调配推荐。现在，客户端会在请求参数中提供仓库排序信息，无需每次处理订单时都调用接口。

#### HTTP 方法

POST

#### 请求参数

```json
{
   "Spdd":[
      {
         "ddnm": "订单内码",
         "qynm": "提交商品订单企业内码",
         "spnm": "商品内码",
         "sl": "商品数量",
         "lg": "量纲",
         "zwdpwcsj": "最晚商品调配完成时间",
         "ckdata": [
            {
               "cknm":"仓库内码",
               "pfwhnm":"剖分网盒内码",
               "yscb": "运输成本"
            },
            {
               "cknm":"仓库内码",
               "pfwhnm":"剖分网盒内码",
               "yscb": "运输成本"
            }
            // 以此类推，包含所有仓库信息
         ]
      }
      // 以此类推，包含所有订单信息
   ],
   "spmzd": "商品满足度", 
   "dpsx": "调配顺序"
}
```

#### 返回结果

```json
{
   "cknm": "仓库内码",
   "qynm": "企业内码",
   "spnm": "商品内码",
   "xqsj": "需求时间",
   "cb": "成本"
}
```

希望这个修改能够满足您的需求，如果还有其他的需求或者需要修改的地方，请随时告诉我。

**注释：**

1. UTC (Coordinated Universal Time) 时间是世界协调时间的英文缩写，也是世界时间标准。UTC与格林尼治平时(GMT)基本一致，但比 GMT 更为精确。在这个接口中，我们使用UTC时间来标记操作的时间，以实现跨时区、全球统一的时间标准，避免由于时区差异导致的时间混乱问题。

2. 脱密处理：在请求参数中，`dyxqxx` 已更改为 `spxqxx`，更准确地表示这是"商品需求信息"。以及单位改成正常的。

3. 之前 `pnm` 的问题已经更正为 `spnm`，即"商品内码"，统一了商品内码的表示。

4. 之前接口名称 `ckylcxByTwsj` 已经更正为 `ckylcxByUTC`，以准确表示这是一个基于 UTC 时间的仓库余量查询接口。

5. 之前接口返回的 JSON 字段 `ckkcsj VOS` 和 `CKKCVOS` 中的空格已经被删除，现在正确的字段名为 `ckkcsjVOS` 和 `ckkcvos`，分别表示"仓库库存时间信息"和"仓库库存信息"。
